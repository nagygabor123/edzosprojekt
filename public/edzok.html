<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Coaches</title>
  <link rel="stylesheet" href="./css/edzok.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />
  <link rel="icon" type="image/x-icon" href="/img/logo.png">  
</head>
<body>
  <nav>
    <input type="checkbox" id="check">
    <label for="check" class="checkbtn">
      <i class="fas fa-bars"></i>
    </label>
    <label class="logo">PEAK LIFE PATH</label>
    <ul>
      <li><a href="index.html">Rólunk</a></li>
      <li><a href="programok.html">Programok</a></li>
      <li><a class="active" href="#">Edzők</a></li>
    </ul>
  </nav>

  <section class="shop container">
    <h2 class="section-title">EDZŐK</h2>
    <div class="shop-content">
      <!-- Dinamikusan generált edzők -->
    </div>
  </section>

  <!-- Modális ablak -->
  <div id="coachModal" class="modal">
    <div class="modal-content">
      <span class="close-button">&times;</span>
      <div class="modal-header">
        <h2 id="coachName"></h2>
      </div>
      <div class="modal-body">
        <div class="modal-images" id="coachImages"></div>
        <p id="coachInfo"></p>
        <p><strong>Telefon:</strong> <span id="coachPhone"></span></p>
      </div>
    </div>
  </div>

  <script>
    async function loadCoaches() {
      try {
        const response = await fetch('/coaches');
        const coaches = await response.json();
    
        const shopContent = document.querySelector('.shop-content');
        shopContent.innerHTML = ''; // Törli az alapértelmezett HTML-t
    
        coaches.forEach(coach => {
          const productBox = document.createElement('div');
          productBox.classList.add('product-box');
          productBox.innerHTML = `
            <img src="${coach.images[0]}" alt="${coach.name}" class="product-img">
            <h2 class="product-title">${coach.name}</h2>
          `;
    
          productBox.addEventListener('click', () => showCoachDetails(coach));
    
          shopContent.appendChild(productBox);
        });
      } catch (error) {
        console.error('Error loading coaches:', error);
      }
    }
    
    function showCoachDetails(coach) {
  const modal = document.getElementById('coachModal');
  document.getElementById('coachName').innerText = coach.name;
  document.getElementById('coachInfo').innerText = coach.info;
  document.getElementById('coachPhone').innerText = coach.phone;

  const imagesContainer = document.getElementById('coachImages');
  imagesContainer.innerHTML = ''; // Törli az előző képeket
  coach.images.forEach(image => {
    const img = document.createElement('img');
    img.src = image;
    imagesContainer.appendChild(img);
  });

  modal.style.display = 'block'; // Megjeleníti a modált
  document.body.classList.add('modal-open'); // Blokkolja a háttér eseményeit

  const closeButton = document.querySelector('.close-button');
  closeButton.onclick = () => closeModal();

  window.onclick = event => {
    if (event.target === modal) {
      closeModal(); // Bezárja a modált, ha a háttérre kattint
    }
  };
}

function closeModal() {
  const modal = document.getElementById('coachModal');
  modal.style.display = 'none'; // Elrejti a modált
  document.body.classList.remove('modal-open'); // Engedélyezi a háttér eseményeit
}

    
    window.onload = loadCoaches;
  </script>  
</body>
</html>
